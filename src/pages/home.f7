<template>
  <div class="page" data-name="home">
    <div class="page-content">
      <div class="block text-align-center text-color-primary">
        <svg width="200" height="200" viewBox="0 0 139 175" xmlns="http://www.w3.org/2000/svg">
          <path d="M63.9035 0.092622C56.5126 1.50082 50.5645 4.6161 45.3984 9.78529C39.3907 15.7961 36.0478 23.0058 35.5869 30.9452L35.3832 34.4545H26.5951C16.4498 34.4545 15.2919 34.6603 12.4618 36.9676C10.323 38.711 9.02845 40.5283 8.27659 42.8428C7.87567 44.077 6.61949 58.3613 3.77434 94.028C-0.681003 149.884 -0.687508 150.038 1.16749 155.485C2.85746 160.446 4.42383 162.939 8.26734 166.785C11.0639 169.583 12.2557 170.502 14.7725 171.805C16.4673 172.683 19.0094 173.76 20.4217 174.2L22.9895 175H115.773L118.341 174.2C119.754 173.76 122.296 172.683 123.991 171.805C126.507 170.502 127.699 169.583 130.496 166.785C134.339 162.939 135.906 160.446 137.596 155.485C139.451 150.039 139.444 149.886 134.988 94.0013C132.074 57.4526 130.894 44.0667 130.477 42.8404C129.357 39.5412 127.089 36.9963 123.845 35.3978C122.353 34.6624 121.831 34.6206 112.828 34.5206L103.378 34.4155L103.175 30.9257C102.377 17.1827 92.5532 5.19095 78.6695 1.01259C76.1164 0.244295 74.9722 0.110426 70.2375 0.0265433C67.2245 -0.0268674 64.3743 0.00291937 63.9035 0.092622ZM76.8573 11.6026C80.5019 12.8961 82.8924 14.43 85.8067 17.3446C90.0312 21.5689 92.2447 26.2355 92.5826 31.6299L92.7597 34.4545H46.0999L46.1051 32.4859C46.1249 24.6937 51.6611 16.3938 59.304 12.6979C63.013 10.9045 65.1426 10.4913 70.0663 10.6091C73.6349 10.6943 74.7633 10.8593 76.8573 11.6026ZM35.6574 59.7804L36.9472 61.0692C38.1914 62.313 38.3208 62.3582 40.6219 62.3582C42.9076 62.3582 43.0589 62.3062 44.2494 61.1157C45.8647 59.5007 46.0664 58.3668 46.0849 50.803L46.0999 44.7258H92.6631L92.6782 50.803C92.6966 58.3668 92.8983 59.5007 94.5136 61.1157C95.7041 62.3062 95.8554 62.3582 98.1411 62.3582C100.442 62.3582 100.572 62.313 101.816 61.0692L103.106 59.7804L103.314 44.6909L111.33 44.794C118.33 44.884 119.419 44.9706 119.927 45.479C120.428 45.981 121.04 52.7367 124.376 94.61C126.504 121.312 128.246 144.546 128.249 146.24C128.251 147.935 128.095 150.011 127.901 150.853C126.551 156.708 121.449 162.081 115.445 163.97L113.034 164.729H25.7285L23.3175 163.97C18.6485 162.501 14.2552 158.754 12.2324 154.516C10.9067 151.738 10.5116 149.928 10.5003 146.583C10.4901 143.485 17.8874 48.6282 18.2829 46.7886C18.6961 44.8665 19.3004 44.7364 27.8499 44.731L35.4493 44.7258L35.6574 59.7804Z" fill="currentColor"/>
          <path d="M46.6915 80.0003L92.665 80C94.2915 80 95.9168 80.2389 97.6153 81.0307C99.6513 81.9798 100.731 83.4757 101.487 84.582C101.546 84.6681 101.601 84.7568 101.652 84.8475C102.542 86.4307 103 88.14 103 89.9787C103 91.7258 102.584 93.6292 101.652 95.2882C101.643 95.3043 101.634 95.3198 101.625 95.3356L72.5799 145.229C71.9394 146.33 70.7605 147.004 69.4874 147C68.2142 146.996 67.04 146.312 66.4074 145.207L37.8954 95.4202C37.8872 95.4067 37.879 95.3933 37.8708 95.3795C37.2183 94.3043 36.2092 92.6415 36.0327 90.4957C35.8705 88.5223 36.314 86.5451 37.3056 84.8308C38.2971 83.1162 39.7898 81.7456 41.5852 80.9066C43.5102 80.007 45.4611 80.0003 46.6915 80.0003ZM65.9361 87.1277H46.6915C45.4271 87.1277 44.9418 87.2056 44.6025 87.3642C44.1332 87.5832 43.7392 87.9436 43.4757 88.3991C43.2122 88.8549 43.0931 89.383 43.1364 89.9117C43.1613 90.2147 43.2848 90.5613 44.0135 91.763C44.0287 91.7882 44.0436 91.8136 44.0583 91.8391L65.9361 130.042V87.1277ZM73.0638 87.1277V130.231L95.4484 91.7785C95.701 91.3195 95.8723 90.6561 95.8723 89.9787C95.8723 89.4292 95.7584 88.9521 95.5037 88.4603C95.2365 88.0759 95.0737 87.8724 94.9376 87.7331C94.8208 87.6139 94.7309 87.5501 94.6038 87.491C94.0746 87.2442 93.533 87.1277 92.665 87.1277H73.0638Z" fill="currentColor"/>
        </svg>
        <h1>TON Merch</h1>
        <div class="block-footer">
          This bot sells merch of The Open Network project.<br/>
          Now in developing ðŸš§
        </div>
        <p>
          <a href="#" class="link">Learn More</a>
        </p>
      </div>
      ${uid === 142239445 && $h`
        <div class="block">
          <button class="button button-fill button-large" style="overflow: visible;" @click="${buttonClick}">
            I like it

            <lottie-player
              mode="normal"
              seek="0",
              initialSegment=""
              src="https://assets7.lottiefiles.com/packages/lf20_0jzfcjkp.json"
              style="width: 50px; position: absolute; opacity: 0; pointer-events: none;"
            >
            </lottie-player>
          </button>
        </div>

        <div class="block">
          <a href="/products/">
            <button class="button button-fill button-large">Products</button>
          </a>
        </div>

        <div class="block">
          <a href="/checkout/">
            <button class="button button-fill button-large">Checkout</button>
          </a>
        </div>
      `}
    </div>
  </div>
</template>

<script>
export default (props, { $el, $f7router, $on, $ref }) => {
  const num = $ref(20);
  const uid = Telegram.WebApp.initDataUnsafe?.user?.id || 142239445;

  const buttonClick = (event) => {
    const lottie = $el.value.find('lottie-player');

    lottie.css({
      opacity: 1,
      left: `${event.offsetX - 25}px`,
      top: `${event.offsetY - 45}px`,
    });

    lottie[0].seek(0);
    lottie[0].play();
  };

  $on('pageInit', () => {
    $el.value.find('svg').on('taphold', () => {
      $f7router.navigate('/products/');
    });
  });

  return $render;
}
</script>
